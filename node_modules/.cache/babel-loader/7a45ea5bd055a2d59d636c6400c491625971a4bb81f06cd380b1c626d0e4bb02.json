{"ast":null,"code":"import { __extends } from \"tslib\";\nimport React from 'react';\nimport { ease } from '../common';\nvar SequenceAnimator = /** @class */function (_super) {\n  __extends(SequenceAnimator, _super);\n  function SequenceAnimator() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.state = {\n      frame: 0\n    };\n    _this._getFrame = function () {\n      var frame = _this.state.frame;\n      var childrenArr = _this._getChildrenArray();\n      return childrenArr.length >= frame ? childrenArr[frame] : null;\n    };\n    _this._playAnimation = function () {\n      _this._animationFrame = requestAnimationFrame(_this._onAnimate);\n    };\n    _this._onAnimate = function (timestamp) {\n      var _a = _this.props,\n        onSequenceEnd = _a.onSequenceEnd,\n        onAnimationStop = _a.onAnimationStop,\n        loop = _a.loop,\n        easing = _a.easing,\n        duration = _a.duration;\n      var childrenArr = _this._getChildrenArray();\n      if (!_this._animationStart) {\n        _this._animationStart = timestamp;\n      }\n      var nextFrame = Math.floor(ease(easing)(timestamp - _this._animationStart, 0, childrenArr.length, duration));\n      if (nextFrame > childrenArr.length - 1) {\n        if (onSequenceEnd) {\n          onSequenceEnd();\n        }\n        if (loop) {\n          nextFrame %= childrenArr.length;\n          _this._animationStart = timestamp;\n        } else {\n          nextFrame = -1;\n        }\n      }\n      if (nextFrame > -1) {\n        _this.setState({\n          frame: nextFrame\n        }, function () {\n          _this._playAnimation();\n        });\n      } else if (onAnimationStop) {\n        onAnimationStop();\n      }\n    };\n    return _this;\n  }\n  SequenceAnimator.prototype.componentDidMount = function () {\n    var autoplay = this.props.autoplay;\n    if (autoplay) {\n      this.start();\n    }\n  };\n  SequenceAnimator.prototype.componentWillUnmount = function () {\n    cancelAnimationFrame(this._animationFrame);\n  };\n  SequenceAnimator.prototype.start = function () {\n    this._playAnimation();\n  };\n  SequenceAnimator.prototype.stop = function () {\n    cancelAnimationFrame(this._animationFrame);\n  };\n  SequenceAnimator.prototype.reset = function () {\n    this.setState({\n      frame: 0\n    });\n  };\n  SequenceAnimator.prototype.render = function () {\n    var frame = this._getFrame();\n    return React.createElement(\"div\", null, frame);\n  };\n  SequenceAnimator.prototype._getChildrenArray = function () {\n    var children = this.props.children;\n    return React.Children.toArray(children || []);\n  };\n  SequenceAnimator.displayName = 'SequenceAnimator';\n  SequenceAnimator.defaultProps = {\n    duration: 1000,\n    autoplay: true,\n    easing: 'linear',\n    loop: true\n  };\n  return SequenceAnimator;\n}(React.Component);\nexport { SequenceAnimator };","map":{"version":3,"names":["React","ease","SequenceAnimator","_super","__extends","_this","apply","arguments","state","frame","_getFrame","childrenArr","_getChildrenArray","length","_playAnimation","_animationFrame","requestAnimationFrame","_onAnimate","timestamp","_a","props","onSequenceEnd","onAnimationStop","loop","easing","duration","_animationStart","nextFrame","Math","floor","setState","prototype","componentDidMount","autoplay","start","componentWillUnmount","cancelAnimationFrame","stop","reset","render","createElement","children","Children","toArray","displayName","defaultProps","Component"],"sources":["../../../src/SequenceAnimator/SequenceAnimator.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}